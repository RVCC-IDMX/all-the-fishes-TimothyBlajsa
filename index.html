<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All The Fishes</title>
    <script src="https://pixijs.download/release/pixi.js">
    </script>
</head>
<body style="background-color: rgb(67, 81, 95);">
   <h1></h1> 
<script>

    //The App
    var app = new PIXI.Application({
        width:640,
        height:400,
        //background: 'img/background.jpg'
        backgroundColor: 0x000000
    });

    //Add view to the document
    document.body.appendChild(app.view);

    //My First Sprite
    let fish1 = PIXI.Sprite.from("img/bigfish.png");

    //Change sprite coordinates
    fish1.x = 420;
    fish1.y = 0;

    //Change sprite size
    fish1.scale.set(.095);

    //Add it to the stage
    app.stage.addChild(fish1);

    //My Second Sprite
    let fish2 = PIXI.Sprite.from("img/smallfish.png");

    //Change sprite2 size
    fish2.scale.set(.07);
    fish2.x = 30;

    //Add it to the stage
    app.stage.addChild(fish2);

    //My background sprite
    let background = PIXI.Sprite.from("img/background.jpg");
    background.scale.set(.7);
    app.stage.addChild(background);

    //My kelp sprite
    let kelp1 = PIXI.Sprite.from("img/kelp.png");
    kelp1.scale.set(.5);
    kelp1.tint = 0x212f55;
    app.stage.addChild(kelp1);

    //My coral sprite
    let coral = PIXI.Sprite.from("img/coral.png");
    coral.x = 300;
    coral.scale.set(.5);
    coral.tint = 0x253152;
    app.stage.addChild(coral);

    //My school sprite
    let school = PIXI.Sprite.from("img/school.png");
    school.tint = 0x090c14;
    school.x = 200;
    school.y = 55;
    school.scale.set(.15);
    app.stage.addChild(school);

    //My second kelp sprite
    let kelp2 = PIXI.Sprite.from("img/kelp.png");
    kelp2.scale.set(.675);
    kelp2.y = .4;
    app.stage.addChild(kelp2);

    //My second coral sprite
    let coral2 = PIXI.Sprite.from("img/coral.png");
    coral2.scale.set(.8);
    coral2.y = 20;
    coral2.x = -400;
    coral2.tint = 0x5676c7;
    app.stage.addChild(coral2);

    //My third fish sprite
    let fish3 = PIXI.Sprite.from("img/betta.png");
    fish3.scale.set(.1);
    fish3.x = 350;
    fish3.tint = 0x2e3f6b;
    app.stage.addChild(fish3);

    //My container for the first two fish sprites
    var my_container = new PIXI.Container();
        my_container.addChild(fish1);
        my_container.addChild(fish2);
        my_container.y = 100;
    app.stage.addChild(my_container);

    //My sprite for the bubbles
    let bubble1 = new PIXI.Sprite.from("img/bubble.png");
    bubble1.scale.set(.01);
    app.stage.addChild(bubble1);

    let bubble2 = new PIXI.Sprite.from("img/bubble.png");
    bubble2.scale.set(.01);
    bubble2.x = 80;
    app.stage.addChild(bubble2);

    let bubble3 = new PIXI.Sprite.from("img/bubble.png");
    bubble3.scale.set(.01);
    bubble3.x = 90;
    app.stage.addChild(bubble3);

    let bubble4 = new PIXI.Sprite.from("img/bubble.png");
    bubble4.scale.set(.01);
    bubble4.x = 105;
    app.stage.addChild(bubble4);

    let bubble5 = new PIXI.Sprite.from("img/bubble.png");
    bubble5.scale.set(.01);
    bubble5.x = 550;
    app.stage.addChild(bubble5);

    let bubble6 = new PIXI.Sprite.from("img/bubble.png");
    bubble6.scale.set(.01);
    bubble6.x = 570;
    app.stage.addChild(bubble6);

    let bubble7 = new PIXI.Sprite.from("img/bubble.png");
    bubble7.scale.set(.01);
    bubble7.x = 600;
    app.stage.addChild(bubble7);

    let bubble8 = new PIXI.Sprite.from("img/bubble.png");
    bubble8.scale.set(.01);
    bubble8.x = 610;
    app.stage.addChild(bubble8);

    //ANimation loop function
    function animationLoop() {
        let time = Date.now();

        let wobble1 = Math.sin(time/1000)*20;
        let wobble2 = Math.cos(time/1000)*20;
        let wobble3 = Math.sin(time/1500)*20;
        let wobble4 = Math.sin(time/500)*5;
        let wobble5 = Math.cos(time/500)*5;
        let sway = Math.sin(time/1500)*10;
        let sway2 = Math.cos(time/1200)*10;
        let swim = Math.sin(time/1500)*1000;
        
        fish1.y = wobble1;
        fish2.y = wobble2;
        fish3.y = wobble3;
        kelp1.x = sway;
        kelp2.x = sway2;
        school.x = swim;
        
        //Bubble animations
        bubble1.y = wobble4;
        bubble2.y = wobble5;
        bubble3.y = wobble5;
        bubble4.y = wobble4;

        bubble5.y = wobble5;
        bubble6.y = wobble4;
        bubble7.y = wobble4;
        bubble8.y = wobble5;
        
        setTimeout(animationLoop, 1000/30);
    }
    animationLoop();

    //My player sprite
    let player = new PIXI.Sprite.from("img/minnow.png");
    player.scale.set(.05);
    player.anchor.set(0);
    player.x = app.view.width / 2;
    player.y = app.view.height / 2;
    app.stage.addChild(player);
    
    //Player mouse interaction
    app.stage.interactive = true;
    app.stage.on("pointermove", movePlayer);

    function movePlayer(e){
        let pos = e.data.global;

        player.x = pos.x;
        player.y = pos.y;
    }
</script>
<p>by Timothy Blajsa</p>
</body>
</html>